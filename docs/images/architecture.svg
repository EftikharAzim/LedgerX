<svg xmlns="http://www.w3.org/2000/svg" width="900" height="700" viewBox="0 0 900 700">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155" />
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="#ffffff" />

  <!-- Header -->
  <text x="28" y="36" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial; font-size:18px; font-weight:700; fill:#0f172a;">LedgerX — Backend Architecture</text>
  <text x="28" y="54" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial; font-size:11px; fill:#475569;">Single Go binary running API, Worker, Scheduler and Outbox goroutines.</text>

  <!-- Clients -->
  <rect x="340" y="86" width="220" height="44" rx="6" fill="#f0fdff" stroke="#06b6d4" stroke-width="1" />
  <text x="450" y="114" text-anchor="middle" style="font-size:13px; font-weight:600; fill:#0f172a; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial;">Clients (Web / Mobile)</text>

  <!-- App -->
  <rect x="180" y="160" width="540" height="120" rx="8" fill="#f3f4ff" stroke="#4338ca" stroke-width="1.2" />
  <text x="450" y="188" text-anchor="middle" style="font-size:14px; font-weight:700; fill:#0f172a; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial;">LedgerX — Single Go Binary</text>
  <text x="450" y="206" text-anchor="middle" style="font-size:11px; fill:#475569; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial;">API • Auth • Rate-limit • Business logic</text>

  <!-- Components inside -->
  <rect x="210" y="214" width="120" height="24" rx="6" fill="#ffffff" stroke="#94a3b8" />
  <text x="270" y="232" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#0f172a;">API Server</text>

  <rect x="345" y="214" width="120" height="24" rx="6" fill="#ffffff" stroke="#94a3b8" />
  <text x="405" y="232" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#0f172a;">Asynq Worker</text>

  <rect x="480" y="214" width="120" height="24" rx="6" fill="#ffffff" stroke="#94a3b8" />
  <text x="540" y="232" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#0f172a;">Scheduler</text>

  <rect x="330" y="246" width="240" height="24" rx="6" fill="#ffffff" stroke="#94a3b8" />
  <text x="450" y="264" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#0f172a;">Outbox Publisher</text>

  <!-- Links -->
  <path d="M450 130 V 160" stroke="#334155" stroke-width="1.2" fill="none" marker-end="url(#arrow)" />

  <!-- Datastores -->
  <rect x="120" y="320" width="240" height="72" rx="8" fill="#fff7ed" stroke="#f97316" stroke-width="1" />
  <text x="240" y="352" text-anchor="middle" style="font-size:13px; font-weight:700; fill:#0f172a;">PostgreSQL</text>
  <text x="240" y="370" text-anchor="middle" style="font-size:11px; fill:#475569;">Transactions • Outbox • Snapshots</text>

  <rect x="540" y="320" width="240" height="72" rx="8" fill="#fff7ed" stroke="#f97316" stroke-width="1" />
  <text x="660" y="352" text-anchor="middle" style="font-size:13px; font-weight:700; fill:#0f172a;">Redis (Asynq)</text>
  <text x="660" y="370" text-anchor="middle" style="font-size:11px; fill:#475569;">Job Queue • Cache • Rate-limit</text>

  <!-- Connections to datastores -->
  <path d="M 300 284 V 320" stroke="#334155" stroke-width="1" fill="none" marker-end="url(#arrow)" />
  <path d="M 600 284 V 320" stroke="#334155" stroke-width="1" fill="none" marker-end="url(#arrow)" />

  <!-- Infra -->
  <rect x="60" y="420" width="220" height="56" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="1" />
  <text x="170" y="444" text-anchor="middle" style="font-size:12px; font-weight:700; fill:#0f172a;">Observability</text>
  <text x="170" y="458" text-anchor="middle" style="font-size:11px; fill:#475569;">Prometheus • Zap</text>

  <rect x="620" y="420" width="220" height="56" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="1" />
  <text x="730" y="444" text-anchor="middle" style="font-size:12px; font-weight:700; fill:#0f172a;">CSV Exports</text>
  <text x="730" y="458" text-anchor="middle" style="font-size:11px; fill:#475569;">Asynq → CSV → Local disk</text>

  <!-- Connections to infra -->
  <path d="M 240 392 V 420" stroke="#334155" stroke-width="1" fill="none" marker-end="url(#arrow)" />
  <path d="M 660 392 V 420" stroke="#334155" stroke-width="1" fill="none" marker-end="url(#arrow)" />

  <!-- Footer note -->
  <text x="28" y="620" style="font-size:11px; fill:#475569; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial;">Runtime: single binary. Goroutines: API, Worker, Scheduler, Outbox. Datastores: Postgres, Redis (Asynq). Observability: Prometheus, Zap.</text>

</svg>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="700" viewBox="0 0 1000 700">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#eef2f9;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#000" flood-opacity="0.08" />
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#475569" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1000" height="700" fill="url(#bgGradient)" />

  <!-- Title -->
  <text x="50" y="45" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 22px; font-weight: 700; fill: #1e293b;">LedgerX — System Architecture</text>
  <text x="50" y="68" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; fill: #64748b;">A clean, vertical overview of the single-binary financial ledger system.</text>

  <!-- Layer 1: Client -->
  <g transform="translate(400, 110)">
    <rect x="0" y="0" width="200" height="60" style="fill: #dcfce7; stroke: #22c55e; stroke-width: 2; rx: 8;" />
    <text x="100" y="30" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">Client Applications</text>
    <text x="100" y="50" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Web / Mobile / API</text>
  </g>

  <!-- Arrow from Client to App -->
  <path d="M 500 170 V 220" style="stroke: #475569; stroke-width: 2; fill: none; marker-end: url(#arrow);" />
  <text x="510" y="200" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">HTTPS/REST API</text>

  <!-- Layer 2: Application -->
  <g transform="translate(250, 220)">
    <rect x="0" y="0" width="500" height="80" style="fill: #e0e7ff; stroke: #4f46e5; stroke-width: 2; rx: 10; filter: url(#shadow);" />
    <text x="250" y="30" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">LedgerX Single Binary</text>
    <text x="250" y="50" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Go • Chi Router • JWT Auth • Rate Limiting</text>
    <text x="250" y="70" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">4 Goroutines: API, Worker, Scheduler, Outbox</text>
  </g>

  <!-- Arrows from App to Data Stores -->
  <path d="M 400 300 V 350" style="stroke: #475569; stroke-width: 2; fill: none; marker-end: url(#arrow);" />
  <text x="320" y="330" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Read/Write</text>
  <path d="M 600 300 V 350" style="stroke: #475569; stroke-width: 2; fill: none; marker-end: url(#arrow);" />
  <text x="610" y="330" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Jobs/Cache</text>

  <!-- Layer 3: Data Stores -->
  <g transform="translate(250, 350)">
    <rect x="0" y="0" width="250" height="80" style="fill: #fef9c3; stroke: #f59e0b; stroke-width: 2; rx: 8;" />
    <text x="125" y="35" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">PostgreSQL</text>
    <text x="125" y="55" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Transactions, Accounts</text>
    <text x="125" y="70" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Outbox, Snapshots</text>
  </g>
  <g transform="translate(500, 350)">
    <rect x="0" y="0" width="250" height="80" style="fill: #fef9c3; stroke: #f59e0b; stroke-width: 2; rx: 8;" />
    <text x="125" y="35" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">Redis</text>
    <text x="125" y="55" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Asynq Job Queue, Cache</text>
    <text x="125" y="70" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Rate Limiting, Pub/Sub</text>
  </g>

  <!-- Arrows from App to Infrastructure -->
  <path d="M 300 300 L 175 480" style="stroke: #475569; stroke-width: 2; fill: none; marker-end: url(#arrow); stroke-dasharray: 6 4;" />
  <text x="200" y="390" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Metrics & Logs</text>
  <path d="M 700 300 L 825 480" style="stroke: #475569; stroke-width: 2; fill: none; marker-end: url(#arrow);" />
  <text x="750" y="390" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">CSV Exports</text>

  <!-- Layer 4: Infrastructure -->
  <g transform="translate(100, 480)">
    <rect x="0" y="0" width="150" height="60" style="fill: #f1f5f9; stroke: #94a3b8; stroke-width: 1.5; rx: 8;" />
    <text x="75" y="30" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">Observability</text>
    <text x="75" y="50" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Prometheus + Zap</text>
  </g>
  <g transform="translate(750, 480)">
    <rect x="0" y="0" width="150" height="60" style="fill: #f1f5f9; stroke: #94a3b8; stroke-width: 1.5; rx: 8;" />
    <text x="75" y="30" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; fill: #1e293b;">File Storage</text>
    <text x="75" y="50" text-anchor="middle" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; fill: #64748b;">Local Disk</text>
  </g>

</svg>
