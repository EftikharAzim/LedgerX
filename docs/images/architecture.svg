<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="540" viewBox="0 0 1000 540">
  <style>
    .font { font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
    .title { font-size: 18px; font-weight: 700; fill: #111827; }
    .label { font-size: 14px; font-weight: 600; fill: #0f172a; }
    .muted { font-size: 12px; fill: #6b7280; }
    .component { fill: #ffffff; stroke: #d1d5db; stroke-width: 1.2; rx: 10; filter: url(#shadow); }
    .service { fill: #f0f9ff; stroke: #0ea5e9; stroke-width: 1.2; rx: 10; }
    .datastore { fill: #fffbeb; stroke: #f59e0b; stroke-width: 1.2; rx: 8; }
    .external { fill: #f7fee7; stroke: #84cc16; stroke-width: 1.2; rx: 8; }
    .arrow { stroke: #1e293b; stroke-width: 1.5; fill: none; marker-end: url(#a); }
    .dashed { stroke-dasharray: 5 5; }
    .legend-box { fill: #f8fafc; stroke: #e2e8f0; rx: 6; }
  </style>
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.06" />
    </filter>
    <marker id="a" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#1e293b"></path>
    </marker>
  </defs>

  <!-- Title -->
  <text x="30" y="34" class="font title">LedgerX â€” System Architecture</text>
  <text x="30" y="54" class="font muted">High-level overview of services, data flow, and core components.</text>

  <!-- Components -->
  <g transform="translate(40, 100)">
    <rect x="0" y="0" width="180" height="70" class="external" />
    <text x="90" y="32" text-anchor="middle" class="font label">Client Application</text>
    <text x="90" y="52" text-anchor="middle" class="font muted">Web / Mobile</text>
  </g>

  <g transform="translate(300, 100)">
    <rect x="0" y="0" width="300" height="90" class="service" />
    <text x="150" y="30" text-anchor="middle" class="font label">LedgerX API Server</text>
    <text x="150" y="50" text-anchor="middle" class="font muted">Go, Chi, JWT Auth, Idempotency</text>
    <text x="150" y="70" text-anchor="middle" class="font muted">Handles all synchronous API requests</text>
  </g>

  <g transform="translate(680, 100)">
    <rect x="0" y="0" width="300" height="90" class="service" />
    <text x="150" y="30" text-anchor="middle" class="font label">Asynchronous Worker</text>
    <text x="150" y="50" text-anchor="middle" class="font muted">Go, Asynq</text>
    <text x="150" y="70" text-anchor="middle" class="font muted">Processes background jobs (exports, snapshots)</text>
  </g>

  <g transform="translate(300, 280)">
    <rect x="0" y="0" width="300" height="70" class="datastore" />
    <text x="150" y="32" text-anchor="middle" class="font label">PostgreSQL Database</text>
    <text x="150" y="52" text-anchor="middle" class="font muted">Primary datastore for all ledger data</text>
  </g>

  <g transform="translate(680, 280)">
    <rect x="0" y="0" width="300" height="70" class="datastore" />
    <text x="150" y="32" text-anchor="middle" class="font label">Redis</text>
    <text x="150" y="52" text-anchor="middle" class="font muted">Job queue for background workers</text>
  </g>

  <g transform="translate(680, 400)">
    <rect x="0" y="0" width="300" height="70" class="component" />
    <text x="150" y="32" text-anchor="middle" class="font label">File Storage</text>
    <text x="150" y="52" text-anchor="middle" class="font muted">Stores generated CSV exports</text>
  </g>

  <!-- Arrows -->
  <path d="M 220 135 H 300" class="arrow" />
  <text x="230" y="125" class="font muted">HTTPS Request</text>

  <path d="M 450 190 V 280" class="arrow" />
  <text x="460" y="235" class="font muted">Read/Write Data</text>

  <path d="M 600 145 H 680" class="arrow dashed" />
  <text x="610" y="135" class="font muted">Enqueue Job</text>

  <path d="M 830 190 V 280" class="arrow dashed" />
  <text x="840" y="235" class="font muted">Dequeue Job</text>

  <path d="M 830 350 V 400" class="arrow" />
  <text x="840" y="375" class="font muted">Write CSV File</text>
  
  <!-- Legend -->
  <g transform="translate(30, 420)">
    <rect x="0" y="0" width="240" height="100" class="legend-box" />
    <text x="15" y="25" class="font label">Legend</text>
    <rect x="15" y="40" width="16" height="12" class="service" />
    <text x="40" y="50" class="font muted">Core Service</text>
    <rect x="15" y="65" width="16" height="12" class="datastore" />
    <text x="40" y="75" class="font muted">Data Store</text>
    <path d="M 130 40 H 150" class="arrow" />
    <text x="160" y="50" class="font muted">Sync Call</text>
    <path d="M 130 65 H 150" class="arrow dashed" />
    <text x="160" y="75" class="font muted">Async Job</text>
  </g>
</svg>